
@{
    ViewBag.Title = "Chi tiết sản phẩm";
    Layout = "~/Views/Shared/_LayoutHome.cshtml";
}
@model ManageRoles.ViewModels.SanPhamModel

<link rel="stylesheet" href="~/Template/product_detail/style.css">
<link rel="stylesheet" href="~/Template/product_detail/responsive.css">

<!-- PATH BAR -->
<div class="path-bar">
    <div class="container">
        <div class="row">
            <a href="#">Trang chủ</a>
            <span>/</span>
            <a href="#">Trang sức</a>
            <span>/</span>
            <a href="#">@Model.Ten</a>
        </div>
    </div>
</div>
<!-- CONTENT -->
<div class="content">
    <div class="container">
        <div class="row">
            <div class="col-xl-6 col-lg-6 detail_left row">
                <div class="detail_thumbnail col-xl-2 col-lg-2">
                    @foreach (var item in ViewBag.Slides)
                    {
                        <img src="~/images/product_detail/content/@item.Anh" alt="">
                    }
                  
                </div>
                <div class="detail_img col-xl-10 col-lg-10">
                    @foreach (var item in ViewBag.Slides)
                    {
                        <img src="~/images/product_detail/content/@item.Anh" alt="">
                    }
                </div>
            </div>

            <!-- Mobile -->
            <div class="detail_left-mobile">
                <div class="detail_left-mobile_slider swiper-container">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <img src="~/images/product_detail/content/img1.jpg" alt="" width="100%">
                        </div>
                        <div class="swiper-slide">
                            <img src="~/images/product_detail/content/img2.jpg" alt="" width="100%">
                        </div>
                        <div class="swiper-slide">
                            <img src="~/images/product_detail/content/img3.jpg" alt="" width="100%">
                        </div>
                        <div class="swiper-slide">
                            <img src="~/images/product_detail/content/img4.jpg" alt="" width="100%">
                        </div>
                        <div class="swiper-slide">
                            <img src="~/images/product_detail/content/img5.jpg" alt="" width="100%">
                        </div>
                        <div class="swiper-slide">
                            <img src="~/images/product_detail/content/img6.jpg" alt="" width="100%">
                        </div>
                    </div>
                    <!-- Add Pagination -->
                    <div class="swiper-pagination detail_left-mobile_pagination"></div>
                </div>
            </div>
            <div class="detail_right col-xl-6 col-lg-6">
                <div class="detail_info clearfix">
                    <h1>@Model.Ten</h1>

                    <div class="info_id clearfix">
                        <div>
                            <span class="">Mã sản phẩm:</span>
                            <span content="Đang cập nhật"><strong>(Đang cập nhật...)</strong></span>
                        </div>
                        <div>
                            <span class="">Thương hiệu:</span>
                            <span> <strong>&nbsp;@ViewBag.NhaSX</strong> </span>
                        </div>
                    </div>
                </div>
                <div class="detail_status">
                    <span>Tình trạng:</span>

                    <span class="span-color">&nbsp;&nbsp;Còn hàng</span>
                </div>
                <div class="detail_price">
                    <span class="price-sale" id="price" data-price="@Model.Gia">
                    @String.Format(System.Globalization.CultureInfo.GetCultureInfo("vi-VN"), "{0:0,00}", Model.Gia) ₫
                    </span>

                    <span class="price-old">1.500.000₫ </span>
                    <span class="price-save" style="display: block;">
                        Tiết kiệm:
                        <span>458.000₫</span>
                    </span>
                </div>
                <div class="detail_option">
                    <p>
                        Chọn size:
                    </p>
                    <div class="row size_list">
                        <div class="size_item">
                            <input id="size10" type="radio" name="size" value="10" checked="">

                            <label for="size10">
                                10
                                <img src="~/images/product_detail/content/size-check.png" alt="10">
                            </label>

                        </div>
                        <div class="size_item">
                            <input id="size11" type="radio" name="size" value="11">

                            <label for="size11">
                                11
                                <img src="~/images/product_detail/content/size-check.png" alt="11">
                            </label>

                        </div>
                        <div class="size_item">
                            <input id="size12" type="radio" name="size" value="12">

                            <label for="size12">
                                12
                                <img src="~/images/product_detail/content/size-check.png" alt="12">
                            </label>

                        </div>
                        <div class="size_item">
                            <input id="size13" type="radio" name="size" value="13">

                            <label for="size13">
                                13
                                <img src="~/images/product_detail/content/size-check.png" alt="13">
                            </label>

                        </div>
                    </div>
                </div>
                <div class="row detail_decision">
                    <div class="detail_quantity">
                        <button class="btn-sub-detail">
                            -
                        </button>
                        <input disabled type="number" value="1" max="5" maxlength="3" id="quantity">
                        <button class="btn-add-detail">
                            +
                        </button>
                    </div>
                    <button class="add-to-cart"  onclick="addProduct(@Model.Id)">
                        Thêm vào giỏ
                    </button>
                </div>
                <div class="call-and-payment">
                    Gọi <a href="tel:0123456789" title="0123456789">0123 456 789</a> để được tư vấn và mua hàng.
                </div>
                <div class="detail_policy">
                    <ul class="listinfo">
                        <li>
                            <img src="~/images/product_detail/content/listinfo1.svg" alt="Miễn phí đổi 30 ngày">
                            <p>Miễn phí đổi 30 ngày</p>
                        </li>
                        <li>
                            <img src="~/images/product_detail/content/listinfo2.svg" alt="Đúng chất lượng kim cương">
                            <p>Đúng chất lượng kim cương</p>
                        </li>
                        <li>
                            <img src="~/images/product_detail/content/listinfo3.svg" alt="Đúng hàm lượng">
                            <p>Đúng hàm lượng</p>
                        </li>
                        <li>
                            <img src="~/images/product_detail/content/listinfo4.svg" alt="Bảo hành chính hãng">
                            <p>Bảo hành chính hãng</p>
                        </li>
                    </ul>
                </div>
                <div class="detail_des">
                    <div class="title" onclick="this.classList.toggle('title-active'); this.nextElementSibling.classList.toggle('drop_content-show')">
                        <p>Mô tả</p>
                        <i class="fas fa-angle-down"></i>
                    </div>
                    <div class="drop_content">
                        <p>
                            Nhẫn Đá quý tự nhiên Citrine 6mm chế tác bằng Bạc cao cấp, trang sức nữ thiết kế kiểu bông hoa cẩn đá tấm đẹp tinh tế.
                        </p>
                        <p>
                            Natural Round cut Citrine Ring in Sterling Silver.
                            Flower Gemstone Ring for Women.
                        </p>
                        <p>
                            Citrine, Thạch Anh vàng, diệu thạch cho sự giàu sang và tiền tài, mang đến cho tâm hồn bạn sự ấp áp của ánh sáng ngập tràn.
                            Citrine làm kích hoạt não bộ, khơi dậy những ý tưởng sáng tạo, giúp đầu óc có được sự tỉnh táo, sáng suốt và lạc quan yêu đời.
                        </p>
                        <ul>
                            <li>
                                Đá quý tự nhiên Citrine hợp Mệnh Kim tương sinh và mệnh Thổ tương hợp.
                            </li>
                            <li>
                                Đá quý thiên nhiên Citrine Hộ Mệnh cho bạn Sinh nhật tháng Mười Một, hay Cung Hoàng đạo Scorpio / Thiên Yết / Hổ Cáp / Bọ Cạp ngày sinh từ 23/10 - 22/11, hay Tuổi Dậu.
                            </li>
                            <li>
                                Đá quý truyền thống kỷ niệm cho 13 năm ngày cưới.
                            </li>
                            <li>
                                Giác cắt đá quý: Tròn, Round cut
                            </li>
                            <li>
                                Kích thước đá quý: 6.0 mm
                            </li>
                            <li>
                                Đá tấm: Cz
                            </li>
                            <li>
                                Chất liệu Bạc 925 xi Rhodium cùng nước xi Vàng trắng nên đẹp và bền màu
                            </li>
                            <li>
                                Miễn phí Xi sửa cho khách hàng
                            </li>
                            <li>
                                Trang sức Bạc Bảo hành 6 tháng.
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="detail_review">
                    <div class="title" onclick="this.classList.toggle('title-active'); this.nextElementSibling.classList.toggle('drop_content-show')">
                        <p>Giới thiệu</p>
                        <i class="fas fa-angle-down"></i>
                    </div>
                    <div class="drop_content">
                        <p>Điều Evo Trang Sức trân quý nhất là để yêu thương luôn kề bên bạn không rời theo từng sản phẩm trang sức bạn đeo bên mình. Không chỉ những cột mốc quan trọng, Evo Trang Sức nhận diện &amp; “bắt trọn” được thương yêu từ những điều bình dị nhất, đời thường nhất.</p>
                        <h2>TRIẾT LÝ SẢN PHẨM</h2>
                        <p>Điều Evo Trang Sức trân quý nhất là để yêu thương luôn kề bên bạn không rời theo từng sản phẩm trang sức bạn đeo bên mình.</p>
                        <p>Không chỉ những cột mốc quan trọng, Evo Trang Sức nhận diện &amp; “bắt trọn” được thương yêu từ những điều bình dị nhất, đời thường nhất. Từ đó, từng sản phẩm được thổi hồn và mang đậm chất riêng cảm xúc để trao trọn cho bản thân cùng người thương yêu.</p>
                        <h2>TRIẾT LÝ SÁNG TẠO</h2>
                        <p>Sáng tạo tại Evo Trang Sức là sự hòa quyện giữa am hiểu &amp; đam mê, giữa chuẩn xác &amp; bay bổng, giữa nghệ thuật chế tác kỳ công và triết lý nhân văn sâu sắc. Đó là:</p>
                        <p><strong>Am hiểu về kỹ thuật</strong>&nbsp;đi chung với am hiểu tâm lý người đeo trang sức, từ việc sàng lọc chất liệu vàng, đá quý, kim cương đến các đòi hỏi nghiêm ngặt trong các khâu chế tác, đáp ứng tối ưu nhu cầu đeo trang sức cho mọi dịp yêu thương</p>
                        <p><strong>Niềm đam mê, tận tâm của những nghệ nhân tài hoa</strong>&nbsp;trong và ngoài nước với bàn tay tỉ mỉ, tinh tế, mang lại cảm giác thoải mái, dễ chịu nhất khi đeo trang sức</p>
                        <p><strong>Chuẩn xác trong nghệ thuật chế tác</strong>, từ đường nét đến hàm lượng/ trọng lượng vàng để mang đến một sản phẩm có giá trị chân thật và minh bạch</p>
                        <p><strong>Sự bay bổng, lấy yêu thương là nguồn cảm hứng</strong>&nbsp;sáng tạo bất tận cho bất kỳ kiểu dáng thiết kế riêng biệt đáp ứng nhu cầu yêu theo cách riêng của từng người</p>
                        <p><strong>Tính nhân văn được đề cao</strong>&nbsp;với nguồn sản phẩm sạch mang tính đạo đức. Từng viên kim cương tuấn thủ đúng chuẩn quốc tế Kimberley Process, để từng sản phẩm trang&nbsp;sức mang đến cảm xúc yêu trọn vẹn.&nbsp;</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="content_list-product mt-5">
            <div class="container" style="padding: 0;">
                <div class="list-product_title text-center mb-3">
                    <h3><a href="#" title="Trang sức cưới hỏi">Sản phẩm liên quan</a></h3>
                </div>
                <div class="list-product container">
                    <div style="width: 100%; overflow: hidden;">
                        <div class="list-product_slide swiper-container">
                            <div class="swiper-wrapper">
                                <div class="item_product swiper-slide">
                                    <div class="tag-sale">
                                        <span>-31%</span>
                                    </div>
                                    <div class="product_image">
                                        <img src="~/images/product_detail/content/product1.jpg" alt="" width="100%">
                                        <div class="option-buy row justify-content-between">
                                            <p>Mua Ngay</p>
                                            <p>Thêm Vào Giỏ</p>
                                        </div>

                                    </div>
                                    <div class="product_info">
                                        <p class="product-name">
                                            <a href="#" title="Nhẫn Đá quý tự nhiên Citrine 6mm flower">Nhẫn Đá quý tự nhiên Citrine 6mm flower</a>
                                        </p>
                                        <div class="product-price text-center">
                                            <p class="price-real">
                                                1.042.000₫
                                                <span class="price-before-sale">
                                                    <del class="">1.500.000₫</del>
                                                </span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="item_product swiper-slide">
                                    <div class="tag-sale">
                                        <span>-31%</span>
                                    </div>
                                    <div class="product_image">
                                        <img src="~/images/product_detail/content/product2.jpg" alt="" width="100%">
                                        <div class="option text-center">
                                            <p>Tùy Chọn</p>
                                        </div>
                                    </div>
                                    <div class="product_info">
                                        <p class="product-name">
                                            <a href="#" title="Nhẫn Đá quý tự nhiên Citrine 6mm flower">Nhẫn Đá quý tự nhiên Citrine 6mm flower</a>
                                        </p>
                                        <div class="product-price text-center">
                                            <p class="price-real">
                                                1.042.000₫
                                                <span class="price-before-sale">
                                                    <del class="">1.500.000₫</del>
                                                </span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="item_product swiper-slide">
                                    <div class="tag-sale">
                                        <span>-31%</span>
                                    </div>
                                    <div class="product_image">
                                        <img src="~/images/product_detail/content/product3.jpg" alt="" width="100%">
                                        <div class="option-buy row justify-content-between">
                                            <p>Mua Ngay</p>
                                            <p>Thêm Vào Giỏ</p>
                                        </div>
                                    </div>
                                    <div class="product_info">
                                        <p class="product-name">
                                            <a href="#" title="Nhẫn Đá quý tự nhiên Citrine 6mm flower">Nhẫn Đá quý tự nhiên Citrine 6mm flower</a>
                                        </p>
                                        <div class="product-price text-center">
                                            <p class="price-real">
                                                1.042.000₫
                                                <span class="price-before-sale">
                                                    <del class="">1.500.000₫</del>
                                                </span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="item_product swiper-slide">
                                    <div class="tag-sale">
                                        <span>-31%</span>
                                    </div>
                                    <div class="product_image">
                                        <img src="~/images/product_detail/content/product3.jpg" alt="" width="100%">
                                        <div class="option text-center">
                                            <p>Tùy Chọn</p>
                                        </div>
                                    </div>
                                    <div class="product_info">
                                        <p class="product-name">
                                            <a href="#" title="Nhẫn Đá quý tự nhiên Citrine 6mm flower">Nhẫn Đá quý tự nhiên Citrine 6mm flower</a>
                                        </p>
                                        <div class="product-price text-center">
                                            <p class="price-real">
                                                1.042.000₫
                                                <span class="price-before-sale">
                                                    <del class="">1.500.000₫</del>
                                                </span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="item_product swiper-slide">
                                    <div class="tag-sale">
                                        <span>-31%</span>
                                    </div>
                                    <div class="product_image">
                                        <img src="~/images/product_detail/content/product2.jpg" alt="" width="100%">
                                        <div class="option-buy row justify-content-between">
                                            <p>Mua Ngay</p>
                                            <p>Thêm Vào Giỏ</p>
                                        </div>
                                    </div>
                                    <div class="product_info">
                                        <p class="product-name">
                                            <a href="#" title="Nhẫn Đá quý tự nhiên Citrine 6mm flower">Nhẫn Đá quý tự nhiên Citrine 6mm flower</a>
                                        </p>
                                        <div class="product-price text-center">
                                            <p class="price-real">
                                                1.042.000₫
                                                <span class="price-before-sale">
                                                    <del class="">1.500.000₫</del>
                                                </span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="item_product swiper-slide">
                                    <div class="tag-sale">
                                        <span>-31%</span>
                                    </div>
                                    <div class="product_image">
                                        <img src="~/images/product_detail/content/product1.jpg" alt="" width="100%">
                                        <div class="option text-center">
                                            <p>Tùy Chọn</p>
                                        </div>
                                    </div>
                                    <div class="product_info">
                                        <p class="product-name">
                                            <a href="#" title="Nhẫn Đá quý tự nhiên Citrine 6mm flower">Nhẫn Đá quý tự nhiên Citrine 6mm flower</a>
                                        </p>
                                        <div class="product-price text-center">
                                            <p class="price-real">
                                                1.042.000₫
                                                <span class="price-before-sale">
                                                    <del class="">1.500.000₫</del>
                                                </span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="list-product_slide_next swiper-button-next"></div>
                    <div class="list-product_slide_prev swiper-button-prev"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.4.js"></script>

<script>
    $(".btn-sub-detail").click(function () {
        if ($("#quantity").val() != 1) {
            var count = parseInt($("#quantity").val()) - 1;
            $("#quantity").val(count);

            var price = parseInt($("#price").attr("data-price")) * count;

            $("#price").text(convertToVND(price));
            
        }
    })

    $(".btn-add-detail").click(function () {
        if ($("#quantity").val() != 5) {
            var count = parseInt($("#quantity").val()) + 1;
            $("#quantity").val(count);

            var price = parseInt($("#price").attr("data-price")) * count;

            $("#price").text(convertToVND(price));
        }
    })

    function convertToVND(x) {
        var res = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(x);
        return res;
    }

        function getCookie(cname) {
            let name = cname + "=";
            let decodedCookie = decodeURIComponent(document.cookie);
            let ca = decodedCookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return "";
        }

        function addProduct(id) {
        var user = getCookie("userInfo");

        if (user == "" || user == null) {
            window.location.href = "/home/login";
        } else {
            $.ajax({
                type: "post",
                url: "/Home/AddToCart",
                data: {
                                        idSP: id
                },
                success: function (res) {
                    if (res.success) {
                    $.ajax({
                                            type: "get",
                        url: "/Home/ReloadCart",
                        success: (ress) => {
                            if (ress.success) {
                                Swal.fire({
                                    position: 'top-end',
                                    icon: 'success',
                                    title: "Đã thêm vào giỏ hàng",
                                    showConfirmButton: false,
                                    timer: 1500
                                })

                                location.reload();
                            }
                        }
                        })
        } else {
                        Swal.fire({
                            position: 'top-end',
        icon: 'error',
        title: "Thêm vào giỏ hàng bị lỗi",
        showConfirmButton: false,
        timer: 1500
                        })
        }
                },
        error: function () {

                }
            })
        }

        }
</script>
<script src="~/js/product_detail.js"></script>
